<div class="jumbotron">
    <div class="container" ><?php echo new Form_Search(); ?></div>
        <ol>
            <li>Search the latest vulnerabilities about technologies you use daily.</li>
            <li>Receive email alerts based on your own keywords.</li>
            <li>Expect the bad boys.</li>
        </ol>
</div>


<h3>Last indexed vulnerabilities:</h3>
<?php

function truncate($string, $width, $etc = ' ..')
{
        $wrapped = explode('$trun$', wordwrap($string, $width, '$trun$', false), 2);
            return $wrapped[0] . (isset($wrapped[1]) ? $etc : '');
}

foreach ($this->paginator as $val):
    if($val['score'] < 4 ){
        $score_str = 'default';
    }
    else if($val['score'] < 7 ){
        $score_str = 'warning';
    }
    else if($val['score'] > 6 ){
        $score_str = 'danger';
    }
    echo '<a href="/vulnerability?id=' . $val['id'] . ' ">' ;
    echo '<h3>' . $val['ext-id'] . ' - '  . truncate( $val['summary'], 90 ) . '</h3></a>';
    echo '<p>' . $val['published-datetime'] . '</p>';
    echo '<span class="label label-'.$score_str.'">score: ' . $val['score'] . '</span>';
    echo '<hr>';

endforeach;

echo $this->paginationControl($this->paginator, 'Elastic', 'partials/paginator.phtml');


